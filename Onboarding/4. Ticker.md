## Ticker

The `ticker` collection allows for easy monitoring of which app users are actively using the Stanford Screenomics app and transferring data. Once the app has a significant number of users, it can be time consuming to check each userâ€™s Cloud Storage folder or events directory, and make
sure each one shows recent activity. The `ticker` is designed to streamline this process by distilling the most recent activities of all users into one central location in Firestore. The `ticker` data is sent to the Screenomics Dashboard app for real-time tracking.

The `ticker` filters `users-events` data every 5 seconds to update a user's ticker entries. Currently, ticker entries are populated for 15 events, meaning the `ticker` can be used to monitor when the app last reported an event.  

| Event | Date/Timestamp; Metadata |
|---|---|
| `GPSLocationEvent` | Most recent date/timestamp |
| `ScreenOnOffEvent` | Most recent date/timestamp; On/Off |
| `AccessibilityEvent` | Most recent date/timestamp |
| `InternetEvent` | Most recent date/timestamp; Connected-to-WiFi/Disconnected-from-WiFi/Connected-to-DataPlan/Disconnected-from-DataPlan |
| `StepCountEvent` | Most recent date/timestamp |
| `BatteryStateEvent` | Most recent date/timestamp |
| `BatteryChargingEvent` | Most recent date/timestamp |
| `ScreenshotPauseEvent` | Most recent date/timestamp; Paused/Resumed |
| `ScreenshotFailureEvent` | Most recent date/timestamp |
| `ScreenshotEvent` | Most recent date/timestamp |
| `ScreenshotUploadEvent` | Most recent date/timestamp |
| `NewForegroundAppEvent` | Most recent date/timestamp |
| `CaptureStartupEvent` | Most recent date/timestamp |
| `LowMemoryEvent` | Most recent date/timestamp |
| `SystemPowerEvent` | Most recent date/timestamp |
| `Alarm-Manager-Notification-Event` | Most recent date/timestamp |
| `LogInOutEvent` | Most recent date/timestamp; Login/Logout |

For developers, each event reported to the ticker can be toggled on or off by updating the `updateTicker` value to 0 (off) or 1 (on) in `EventUploader.java' (see the code below). For example, if the `updateTicker` for the `GPSLocationEvent` class in `getLocationEventCharacteristics` is set to 0, the ticker will not report GPS sensor activities.

```
public Map<String, String> getLocationEventCharacteristics() {
        return new ModuleCharacteristicsData("GPSLocationEvent", "location", "1").toMap();
    }

    public Map<String, String> getPowerScreenOnOffCharacteristics() {
        return new ModuleCharacteristicsData("ScreenOnOffEvent", "screen-on-off", "1").toMap();
    }

    public Map<String, String> getInteractionEventCharacteristics() {
        return new ModuleCharacteristicsData("AccessibilityEvent", "accessibility", "1").toMap();
    }

    public Map<String, String> getNetworkEventCharacteristics() {
        return new ModuleCharacteristicsData("InternetEvent", "Internet", "1").toMap();
    }

    public Map<String, String> getStepCountEventCharacteristics() {
        return new ModuleCharacteristicsData("StepCountEvent", "step-count", "1").toMap();
    }

    public Map<String, String> getBatteryStateEventCharacteristics() {
        return new ModuleCharacteristicsData("BatteryStateEvent", "battery-state", "1").toMap();
    }

    public Map<String, String> getBatteryChargingEventCharacteristics() {
        return new ModuleCharacteristicsData("BatteryChargingEvent", "battery-charging", "1").toMap();
    }

    public Map<String, String> getScreenshotFailureCharacteristics() {
        return new ModuleCharacteristicsData("ScreenshotFailureEvent", "screenshot-failure", "0").toMap();
    }

    public Map<String, String> getScreenshotEventCharacteristics() {
        return new ModuleCharacteristicsData("ScreenshotEvent", "screenshot", "1").toMap();
    }

    public Map<String, String> getScreenshotUploadEventCharacteristics() {
        return new ModuleCharacteristicsData("ScreenshotUploadEvent", "screenshot-upload", "1").toMap();
    }

    public Map<String, String> getForegroundAppModuleCharacteristics() {
        return new ModuleCharacteristicsData("NewForegroundAppEvent", "new-foreground-app", "1").toMap();
    }

    public Map<String, String> getCaptureStartupCharacteristics() {
        return new ModuleCharacteristicsData("CaptureStartupEvent", "capture-startup", "1").toMap();
    }

    public Map<String, String> getLowMemoryEventCharacteristics() {
        return new ModuleCharacteristicsData("LowMemoryEvent", "low-memory", "0").toMap();
    }

    public Map<String, String> getSystemPowerEventCharacteristics() {
        return new ModuleCharacteristicsData("SystemPowerEvent", "system-power", "1").toMap();
    }

    public Map<String, String> getAlarmManagerCharacteristics() {
        return new ModuleCharacteristicsData("Alarm-Manager-Notification-Event", "alarm-manager-notification", "1").toMap();
    }
```

Ticker data resides in the top-level `ticker` collection in Firestore. This collection is organized as such:

`ticker  
> `- [username]`
> > `* [event-type]`: `[datetimestamp]; [metadata]`
> > `* [...]
> `- [...]`





